{"ast":null,"code":"var _jsxFileName = \"/Users/aroush/338-Lab8/Assignment_1_381_/my-ecommerce-app/src/components/LoginForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport SignupForm from './SignupForm.js';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuthContext } from '../App.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction LoginForm() {\n  _s();\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [authMessage, setAuthMessage] = useState(\"\");\n  const [showSignup, setShowSignup] = useState(false);\n  const {\n    authenticated,\n    setAuthenticated\n  } = useAuthContext();\n  const [isInitialRender, setIsInitialRender] = useState(true);\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (isInitialRender) {\n      setIsInitialRender(false);\n    } else if (authenticated) {\n      navigate(`/products`);\n    }\n  }, [authenticated]);\n  function handleAuthenication() {\n    if (!username || !password) {\n      setAuthMessage(\"All fields required\");\n    } else {\n      fetch('http://127.0.0.1:5000/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          'username': username,\n          'password': password\n        })\n      }).then(response => {\n        if (response.ok) {\n          navigate(`/products`);\n          return response.json();\n        } else {\n          throw new Error('Authentication failed');\n        }\n      }).then(data => {\n        setAuthMessage(data.authMessage);\n        setAuthenticated(data.authenticated);\n      }).catch(error => setAuthMessage(error));\n    }\n    console.log(authMessage);\n  }\n  ;\n  function gotoSignupForm() {\n    setShowSignup(true);\n  }\n  if (showSignup) {\n    return /*#__PURE__*/_jsxDEV(SignupForm, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: authMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Username: \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      onChange: e => setUsername(e.target.value),\n      placeholder: \"Enter your username\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Password: \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      onChange: e => setPassword(e.target.value),\n      placeholder: \"Enter your password\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAuthenication,\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 66\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: gotoSignupForm,\n      children: \"Switch to Signup\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n}\n_s(LoginForm, \"nzW0Y5EEMfU9d5xZvEI1B0faEuQ=\", false, function () {\n  return [useAuthContext, useNavigate];\n});\n_c = LoginForm;\n;\nexport default LoginForm;\nvar _c;\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["React","useState","useEffect","SignupForm","useNavigate","useAuthContext","jsxDEV","_jsxDEV","LoginForm","_s","username","setUsername","password","setPassword","authMessage","setAuthMessage","showSignup","setShowSignup","authenticated","setAuthenticated","isInitialRender","setIsInitialRender","navigate","handleAuthenication","fetch","method","headers","body","JSON","stringify","then","response","ok","json","Error","data","catch","error","console","log","gotoSignupForm","fileName","_jsxFileName","lineNumber","columnNumber","children","style","color","type","onChange","e","target","value","placeholder","onClick","_c","$RefreshReg$"],"sources":["/Users/aroush/338-Lab8/Assignment_1_381_/my-ecommerce-app/src/components/LoginForm.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport SignupForm from './SignupForm.js';\nimport {useNavigate} from 'react-router-dom';\nimport { useAuthContext } from '../App.js';\n\nfunction LoginForm() {\n    const [username, setUsername] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [authMessage, setAuthMessage] = useState(\"\");\n    const [showSignup, setShowSignup] = useState(false);\n    const {authenticated, setAuthenticated} = useAuthContext();\n    const [isInitialRender, setIsInitialRender] = useState(true);\n\n    const navigate = useNavigate();\n\n    useEffect(()=> {\n        if (isInitialRender){\n            setIsInitialRender(false)\n        }\n        else if (authenticated){\n            navigate(`/products`);\n        }\n    },[authenticated])\n    \n    function handleAuthenication() {\n        if (!username || !password) {\n            setAuthMessage(\"All fields required\");\n        }\n        else{\n            fetch('http://127.0.0.1:5000/login',{\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({'username':username, 'password':password}),\n            })\n            .then(response => {\n                if (response.ok) {\n                    navigate(`/products`)\n                  return response.json();\n                } else {\n                    throw new Error('Authentication failed');\n                }\n            })\n            .then(data => {setAuthMessage(data.authMessage); setAuthenticated(data.authenticated);})\n            .catch(error => setAuthMessage(error));\n    }console.log(authMessage)\n    };\n\n    function gotoSignupForm() {\n        setShowSignup(true); \n    }\n\n    if (showSignup) {\n        return <SignupForm />; \n    }\n\n    return (\n        <div>\n            <h1>Login</h1>\n            <p style={{ color: \"red\" }}>{authMessage}</p>\n\n            <label>Username: </label>\n            <input\n                type=\"text\"\n                onChange={(e) => setUsername(e.target.value)}\n                placeholder='Enter your username'\n            />\n            <br />\n\n            <label>Password: </label>\n            <input\n                type=\"password\"\n                onChange={(e) => setPassword(e.target.value)}\n                placeholder='Enter your password'\n            />\n            <br />\n\n            <button onClick={handleAuthenication}>Login</button> <br />\n            <button onClick={gotoSignupForm}>Switch to Signup</button>\n        </div>\n    );\n};\n\nexport default LoginForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}